# 经典网格交易策略使用指南

## 🎯 策略概述

经典网格策略是一种在震荡市场中表现优异的量化交易策略。该策略通过在不同价格水平设置买入和卖出订单，形成一个"网格"，当价格在区间内波动时自动买低卖高，获取价差收益。

### 🏗️ 核心特点

- **通用性强**: 支持所有8个交易所（EdgeX, Backpack, Paradex, Aster, Lighter, GRVT, Extended, Apex）
- **参数可配**: 网格间距、数量、资金分配完全可定制
- **自动化**: 订单成交后自动补充新网格，无需人工干预
- **风险可控**: 内置参数验证和风险提示
- **实时监控**: 完整的交易日志和状态监控

## 📋 安装要求

确保已按照主项目README安装所有依赖。网格策略使用相同的环境配置。

## 🚀 快速开始

### 1. 策略参数分析（推荐第一步）

在实际交易前，建议先分析策略参数：

```bash
# 分析ETH网格策略参数
python grid_bot.py --ticker ETH --grid-spacing 1.0 --grid-upper 10 --grid-lower 10 --per-order 50 --analyze-only
```

### 2. 模拟测试

运行模拟测试了解策略行为：

```bash
# 运行模拟测试
python grid_bot.py --ticker ETH --grid-spacing 1.0 --grid-upper 10 --grid-lower 10 --per-order 50 --test-mode
```

### 3. 实际交易

```bash
# EdgeX交易所 ETH 网格策略
python grid_bot.py --exchange edgex --ticker ETH --grid-spacing 0.5 --grid-upper 15 --grid-lower 15 --per-order 50

# Backpack交易所 BTC 网格策略
python grid_bot.py --exchange backpack --ticker BTC --grid-spacing 1.0 --grid-upper 10 --grid-lower 10 --per-order 100
```

## ⚙️ 参数详解

### 核心参数

| 参数 | 默认值 | 说明 | 建议范围 |
|------|--------|------|----------|
| `--grid-spacing` | 1.0 | 网格间距百分比 | 0.1% - 10% |
| `--grid-upper` | 10 | 上方网格数量 | 5 - 50 |
| `--grid-lower` | 10 | 下方网格数量 | 5 - 50 |
| `--per-order` | 50.0 | 每个网格订单金额(USDT) | 10 - 1000 |
| `--initial-balance` | 1000.0 | 策略总资金(USDT) | 100 - 无限制 |

### 风险控制参数

| 参数 | 默认值 | 说明 |
|------|--------|------|
| `--stop-price` | -1 | 停止交易价格 |
| `--pause-price` | -1 | 暂停交易价格 |
| `--max-orders` | 100 | 最大同时订单数 |

### 测试参数

| 参数 | 说明 |
|------|------|
| `--analyze-only` | 仅分析参数，不执行交易 |
| `--test-mode` | 运行模拟测试 |

## 📊 策略配置建议

### 按币种配置

#### BTC/ETH (稳定币种)
```bash
# 保守配置
--grid-spacing 0.5 --grid-upper 20 --grid-lower 20 --per-order 100

# 激进配置  
--grid-spacing 0.3 --grid-upper 30 --grid-lower 30 --per-order 50
```

#### 高波动币种 (SOL, AVAX等)
```bash
# 保守配置
--grid-spacing 1.5 --grid-upper 15 --grid-lower 15 --per-order 80

# 激进配置
--grid-spacing 1.0 --grid-upper 25 --grid-lower 25 --per-order 40
```

### 按资金量配置

#### 小资金 (< $1000)
```bash
--per-order 20 --grid-upper 8 --grid-lower 8 --initial-balance 500
```

#### 中等资金 ($1000 - $10000)
```bash
--per-order 50 --grid-upper 15 --grid-lower 15 --initial-balance 2000
```

#### 大资金 (> $10000)
```bash
--per-order 200 --grid-upper 25 --grid-lower 25 --initial-balance 10000
```

## 📈 收益计算

### 理论收益

每完成一个网格循环的收益 = `网格间距% × 每单金额`

例如：
- 网格间距：1%
- 每单金额：100 USDT
- 单次收益：1% × 100 USDT = 1 USDT

### 年化收益估算

假设：
- 每日完成网格交易：10次
- 单次收益：1 USDT
- 日收益：10 USDT
- 年收益：10 × 365 = 3650 USDT
- 使用资金：2000 USDT
- **年化收益率：182.5%**

> ⚠️ **风险提示**: 以上为理想情况下的估算，实际收益受市场波动影响，可能出现浮亏。

## 🛡️ 风险管理

### 主要风险

1. **趋势风险**: 单边大趋势可能导致网格失效
2. **资金占用**: 网格订单占用大量资金
3. **极端波动**: 价格超出网格范围

### 风险控制措施

1. **合理设置网格间距**: 根据币种波动性调整
2. **使用止损价格**: 设置 `--stop-price` 参数
3. **分散投资**: 不要将所有资金投入单一网格
4. **定期调整**: 根据市场情况调整参数

## 💡 最佳实践

### 策略优化

1. **回测分析**: 使用 `--analyze-only` 模式分析历史表现
2. **小资金测试**: 先用小资金验证策略效果
3. **渐进式调整**: 根据实际表现逐步优化参数

### 监控要点

1. **网格完成率**: 观察网格交易频率
2. **资金利用率**: 确保资金得到有效利用
3. **浮亏控制**: 关注未成交订单的浮亏情况

## 🔧 故障排除

### 常见问题

#### 1. 网格订单数量不足
**现象**: 活跃订单少于预期
**解决**: 检查资金余额，调整每单金额

#### 2. 网格交易频率低
**现象**: 长时间无网格交易
**解决**: 减小网格间距或选择波动性更高的币种

#### 3. 资金利用率低
**现象**: 大量资金闲置
**解决**: 增加网格数量或每单金额

### 错误代码

| 错误信息 | 原因 | 解决方案 |
|----------|------|----------|
| "网格间距必须大于0" | 参数设置错误 | 检查 `--grid-spacing` 参数 |
| "所需资金不足" | 资金不够 | 增加 `--initial-balance` 或减少网格数量 |
| "价格覆盖范围较小" | 网格范围不足 | 增加网格数量或间距 |

## 📞 技术支持

如有问题，请参考：
1. 主项目 README.md
2. 使用 `--analyze-only` 模式检查参数
3. 使用 `--test-mode` 进行模拟测试

---

**免责声明**: 网格策略存在投资风险，过往表现不代表未来收益。请在充分了解策略风险后谨慎使用。
