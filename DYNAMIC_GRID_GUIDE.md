# 🔄 动态网格移动功能指南

## 📋 功能概述

动态网格移动是网格策略的增强功能，当价格突破网格边界时自动移动整个网格，让策略更好地适应趋势市场。

### 🔍 工作原理

1. **价格监控**: 每10秒检测一次当前价格
2. **突破检测**: 检查价格是否突破上边界或下边界
3. **网格移动**: 突破时自动移动网格中心价格
4. **订单更新**: 取消旧订单，下新订单到新网格位置

## ⚙️ 配置参数

### 启用/禁用动态移动

```bash
# 启用动态移动（默认）
python grid_bot.py --exchange grvt --ticker ETH --grid-spacing 1 --grid-upper 10 --grid-lower 10 --per-order 50

# 禁用动态移动
python grid_bot.py --exchange grvt --ticker ETH --grid-spacing 1 --grid-upper 10 --grid-lower 10 --per-order 50 --disable-dynamic
```

### 调整突破阈值

```bash
# 默认阈值：0.5x网格间距
python grid_bot.py --exchange grvt --ticker ETH --grid-spacing 2 --grid-upper 10 --grid-lower 10 --per-order 50

# 更敏感的阈值：0.3x网格间距（更早触发移动）
python grid_bot.py --exchange grvt --ticker ETH --grid-spacing 2 --grid-upper 10 --grid-lower 10 --per-order 50 --breakthrough-threshold 0.3

# 更保守的阈值：1.0x网格间距（需要更大突破才移动）
python grid_bot.py --exchange grvt --ticker ETH --grid-spacing 2 --grid-upper 10 --grid-lower 10 --per-order 50 --breakthrough-threshold 1.0
```

## 📊 突破检测逻辑

### 计算边界

- **上边界**: 中心价格 × (1 + 网格间距% × 上方网格数)
- **下边界**: 中心价格 × (1 - 网格间距% × 下方网格数)
- **突破阈值**: 中心价格 × (网格间距% × 突破阈值系数)

### 触发条件

- **向上移动**: 当前价格 > 上边界 + 突破阈值
- **向下移动**: 当前价格 < 下边界 - 突破阈值

### 移动规则

- **向上移动**: 新中心价格 = 旧中心价格 × (1 + 网格间距%)
- **向下移动**: 新中心价格 = 旧中心价格 × (1 - 网格间距%)

## 💡 使用场景

### 适合动态移动的情况

✅ **趋势市场**: 价格持续上涨或下跌  
✅ **波动较大**: 价格经常突破网格边界  
✅ **长期运行**: 希望网格能跟随价格趋势  

### 适合固定网格的情况

❌ **震荡市场**: 价格在区间内反复波动  
❌ **短期交易**: 只运行几小时或几天  
❌ **明确区间**: 明确知道价格会在某个区间内波动  

## 📈 示例场景

### 场景1：ETH上涨趋势

```
初始状态：
- 中心价格: $2000
- 网格间距: 1%
- 上边界: $2100 (10个上方网格)
- 下边界: $1900 (10个下方网格)

价格上涨到 $2110:
- 触发条件: $2110 > $2100 + $10 (突破阈值)
- 执行动作: 网格向上移动1%
- 新中心价格: $2020
- 新上边界: $2120
- 新下边界: $1920
```

### 场景2：HYPE下跌趋势

```
初始状态：
- 中心价格: $35
- 网格间距: 2%
- 上边界: $42 (10个上方网格)
- 下边界: $28 (10个下方网格)

价格下跌到 $27.5:
- 触发条件: $27.5 < $28 - $0.35 (突破阈值)
- 执行动作: 网格向下移动2%
- 新中心价格: $34.3
- 新上边界: $41.16
- 新下边界: $27.44
```

## 📊 监控指标

运行时会显示以下信息：

```
Grid Status - Current Price: 2050.45 | Active Orders: 20 (Buy: 10, Sell: 10) | 
Total Profit: 15.25 USDT | Grid Trades: 8 | Grid Moves: 2
```

- **Current Price**: 当前市场价格
- **Grid Moves**: 网格移动次数
- **Grid Trades**: 网格交易次数
- **Total Profit**: 累计利润

## ⚠️ 注意事项

1. **频繁移动**: 在高波动市场中可能频繁移动，增加交易成本
2. **订单取消**: 移动时会取消所有现有订单，可能错失一些交易机会
3. **趋势判断**: 动态移动基于价格突破，不能预测趋势反转
4. **资金效率**: 移动过程中可能短暂降低资金利用率

## 🎯 最佳实践

1. **合理设置阈值**: 
   - 高波动币种使用较大阈值（0.8-1.2）
   - 稳定币种使用较小阈值（0.3-0.6）

2. **适配网格间距**:
   - 小间距配合小阈值，快速跟随趋势
   - 大间距配合大阈值，减少无效移动

3. **监控移动频率**:
   - 移动过于频繁时考虑调大阈值
   - 长时间无移动时考虑调小阈值

4. **趋势市场优先**:
   - 在明显趋势市场中启用动态移动
   - 在震荡市场中可以禁用动态移动

---

**动态网格移动让你的网格策略更智能，更好地适应市场变化！** 🚀
